{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Page</title>
  <link rel="stylesheet" href="{% static 'css/smartlock.css' %}">
</head>
<body>
<div class="carousel-container container">
  <div class="carousel-slides">
    <div class="carousel-slide active">
      <img src="{% static 'main-webp/lock1.png' %}" alt="Product 1" class="product-image">
    </div>
    <div class="carousel-slide">
      <img src="{% static 'main-webp/lock2.png' %}" alt="Fingerprint Padlock" class="product-image">
    </div>
    <div class="carousel-slide">
      <img src="{% static 'main-webp/lock3.png' %}" alt="Fingerprint Padlock" class="product-image">
    </div>
    <div class="carousel-slide">
      <img src="{% static 'main-webp/lock4.png' %}" alt="Product 2" class="product-image">
    </div>
    <div class="carousel-slide">
      <img src="{% static 'main-webp/lock5.png' %}" alt="Fingerprint Padlock" class="product-image">
    </div>
    <div class="carousel-slide">
      <img src="{% static 'main-webp/lock6.png' %}" alt="Product 2" class="product-image">
    </div>
  </div>
  <div class="countdown" id="countdown1">
    <div class="time-unit"><span class="days">03</span> d</div>
    <div class="time-unit"><span class="hours">00</span> h</div>
    <div class="time-unit"><span class="minutes">00</span> m</div>
    <div class="time-unit"><span class="seconds">00</span> s</div>
    <span class="hurry">Hurry Up!</span>
  </div>
  <div class="price">
    <h4>Price</h4>
    <span class="original-price">₹2999</span>
    <span class="sale-price">₹999</span>
    <span class="in-stock">In stock</span>
  </div>
  <form class="buy-now-button"><script src="https://checkout.razorpay.com/v1/payment-button.js" data-payment_button_id="pl_NEfDnmreQEsGn0" async> </script> </form>
  <h1 class="product-title">Padlock with Fingerprint</h1>
  <div class="specs">
    <header style="font-size: 20px; margin-bottom: 20px;">Specifications</header>
    <table class="specs-table">
      <tr>
        <th>Lock Type</th>
        <td>Biometric</td>
      </tr>
      <tr>
        <th>Item Dimensions l x w x h</th>
        <td>45 x 13 x 75 mm</td>
      </tr>
      <tr>
        <th>Item Weight</th>
        <td>130 Grams</td>
      </tr>
      <tr>
        <th>Material</th>
        <td>Steel Alloy</td>
      </tr>
      <tr>
        <th>Battery Backup</th>
        <td>6 Months</td>
      </tr>
    </table>
  </div>
  <a href="#view-details" class="view-details">View Details</a>
  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>About This Item</h2>
      <p>
        <strong>Advanced Fingerprint Recognition:</strong>
        Unlock with just a touch using state-of-the-art fingerprint technology. Ideal for both indoor and outdoor applications.
      </p>
      <p>
        <strong>Portable and Convenient:</strong>
        Compact and lightweight, perfect for securing your luggage, gym locker, or toolbox.
      </p>
      <p>
        <strong>Anti-Theft Security:</strong>
        Enhanced security with smart fingerprint technology to prevent unauthorized access.
      </p>
      <p>
        <strong>Simple Charging:</strong>
        Easy USB charging for quick power-ups.
      </p>
      <p>
        Package includes 1 Fingerprint Lock and 1 USB Cable.
      </p>
    </div>
  </div>
</div>
<script>
  let slideIndex = 0;
  const slides = document.querySelectorAll('.carousel-slide');
  let countdownTimer;

  function showSlides() {
    slides.forEach((slide, index) => {
      slide.style.display = "none";
      if (index === slideIndex) {
        slide.style.display = "block";
      }
    });

    slideIndex = (slideIndex + 1) % slides.length;
    setTimeout(showSlides, 3000);
  }

  function calculateEndTime() {
    let endTime = localStorage.getItem('countdownEndTime');
    if (!endTime) {
      const now = new Date();
      now.setDate(now.getDate() + 3);
      endTime = now.toISOString();
      localStorage.setItem('countdownEndTime', endTime);
    }
    return new Date(endTime);
  }

  function startCountdown(endTime) {
    function updateCountdown() {
      const now = new Date();

      let diff = Math.floor((endTime - now) / 1000);

      let days = Math.floor(diff / (24 * 60 * 60));
      let hours = Math.floor(diff % (24 * 60 * 60) / (60 * 60));
      let minutes = Math.floor(diff % (60 * 60) / 60);
      let seconds = Math.floor(diff % 60);

      document.querySelector('.days').textContent = days < 10 ? "0" + days : days;
      document.querySelector('.hours').textContent = hours < 10 ? "0" + hours : hours;
      document.querySelector('.minutes').textContent = minutes < 10 ? "0" + minutes : minutes;
      document.querySelector('.seconds').textContent = seconds < 10 ? "0" + seconds : seconds;

      if (diff <= 0) {
        clearInterval(countdownTimer);
        document.querySelector('.countdown').textContent = "Offer has ended";
      }
    }

    countdownTimer = setInterval(updateCountdown, 1000);
    updateCountdown();
  }

  const endTime = calculateEndTime();
  startCountdown(endTime);
  showSlides();

  var modal = document.getElementById("myModal");
  var btn = document.querySelector(".view-details");
  var span = document.getElementsByClassName("close")[0];

  btn.onclick = function() {
    modal.style.display = "block";
  }

  span.onclick = function() {
    modal.style.display = "none";
  }

  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
</script>
</body>
</html>